<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>China News from Japan</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="logo.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- 引入 Noto Sans 用于黑体 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Noto+Serif+JP:wght@400;500;700;900&family=Noto+Serif+SC:wght@400;500;700;900&family=Noto+Serif+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="wx-mask" onclick="this.style.display='none'" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; color:#fff; text-align:right; padding-top:20px;">
        <div style="font-size: 40px; margin-right: 15px;">↗</div>
        <p style="font-size: 18px; font-weight: bold; margin-right: 15px;">请点击右上角 ...</p>
        <p style="font-size: 16px; margin-right: 15px;">选择在浏览器打开</p>
    </div>
    <div id="install-banner" style="display:none; position:fixed; bottom:0; left:0; right:0; background:var(--primary-color); color:white; padding:12px 16px; z-index:3000; justify-content:space-between; align-items:center; font-size:13px; box-shadow:0 -2px 10px rgba(0,0,0,0.1);">
        <span id="install-text">添加到主屏幕，获取最佳体验</span><span id="install-close" style="font-size:20px; cursor:pointer;">×</span>
    </div>

    <div class="header">
        <div class="header-content">
            <div class="header-title">
                <h1 id="site-title">从日本看中国</h1>
                <p>Japan → China</p>
            </div>
            <div class="nav-bar">
                <div class="nav-btn" onclick="toggleSection('fav')">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"/></svg>
                    <span id="fav-badge">0</span>
                </div>
                <div class="nav-btn" onclick="toggleSection('about')">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>
                </div>
                <div class="nav-btn" onclick="toggleSection('settings')">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="category-nav-container">
            <div class="category-scroll" id="category-scroll"></div>
        </div>

        <div class="control-bar">
            <div class="control-info">
                <div class="section-title" id="list-title">100条日媒最新发布的中国新闻</div>
                <div id="last-update-time"></div>
            </div>
            <div class="search-wrapper">
                <svg class="search-icon-small" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                <input type="text" id="search-input" class="search-input" placeholder="搜索..." oninput="handleSearch(this.value)">
            </div>
        </div>

        <div id="news-list"></div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="modal-settings" onclick="closeModal('settings')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="settings-title">设置</div>
                <button class="modal-close" onclick="closeModal('settings')" style="background:none;border:none;font-size:24px;color:#999;">×</button>
            </div>
            <div class="modal-body">
                <div class="settings-list">
                    <!-- Language & Theme -->
                    <div class="settings-group">
                        <div class="settings-group-title">常规</div>
                        <div class="settings-row">
                            <span id="label-lang">简繁切换</span>
                            <div class="settings-btn-group">
                                <button class="settings-option-btn" id="lang-sc" onclick="setLanguage('sc')">简体</button>
                                <button class="settings-option-btn" id="lang-tc" onclick="setLanguage('tc')">繁体</button>
                            </div>
                        </div>
                        <div class="settings-row">
                            <span id="label-theme">明暗切换</span>
                            <div class="settings-btn-group">
                                <button class="settings-option-btn" id="theme-light" onclick="setTheme('light')">亮色</button>
                                <button class="settings-option-btn" id="theme-dark" onclick="setTheme('dark')">暗色</button>
                            </div>
                        </div>
                    </div>

                    <!-- Fonts -->
                    <div class="settings-group">
                        <div class="settings-group-title">阅读</div>
                        <div class="settings-row">
                            <span>字体样式</span>
                            <div class="settings-btn-group">
                                <button class="settings-option-btn" id="font-serif" onclick="setFontFamily('serif')">宋体</button>
                                <button class="settings-option-btn" id="font-sans" onclick="setFontFamily('sans')">黑体</button>
                            </div>
                        </div>
                        <div class="settings-row">
                            <span>字体大小</span>
                            <div class="settings-btn-group">
                                <button class="settings-option-btn" id="size-s" onclick="setFontSize(0.9)">小</button>
                                <button class="settings-option-btn" id="size-m" onclick="setFontSize(1.0)">中</button>
                                <button class="settings-option-btn" id="size-l" onclick="setFontSize(1.15)">大</button>
                            </div>
                        </div>
                    </div>

                    <!-- Data & Info -->
                    <div class="settings-group">
                        <div class="settings-group-title">关于</div>
                        <div class="settings-row">
                            <span>数据清理</span>
                            <button onclick="clearAllFavorites()" style="color:#e74c3c;background:#fff5f5;border:1px solid #ffccd5;padding:4px 8px;border-radius:4px;font-size:11px;">清空收藏</button>
                        </div>
                        <div class="disclaimer-text">
                            <strong>版本 1.2</strong><br>
                            本站仅为新闻聚合工具，所有内容均采集自公开互联网，不代表本站立场。本站不对新闻内容的真实性、准确性负责，亦不承担任何法律责任。
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal-overlay" id="modal-about" onclick="closeModal('about')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="about-modal-title">关于本站</div>
                <button class="modal-close" onclick="closeModal('about')" style="background:none;border:none;font-size:24px;color:#999;">×</button>
            </div>
            <div class="modal-body" style="padding:16px;"></div>
        </div>
    </div>

    <!-- Fav Modal -->
    <div class="modal-overlay" id="modal-fav" onclick="closeModal('fav')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="fav-modal-title">我的收藏</div>
                <button class="modal-close" onclick="closeModal('fav')" style="background:none;border:none;font-size:24px;color:#999;">×</button>
            </div>
            <div class="modal-body" id="fav-list-modal" style="padding:0;"></div>
        </div>
    </div>

    <!-- Archive Modal -->
    <div class="modal-overlay" id="modal-archive" onclick="closeModal('archive')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="archive-modal-title">历史存档</div>
                <button class="modal-close" onclick="closeModal('archive')" style="background:none;border:none;font-size:24px;color:#999;">×</button>
            </div>
            <div class="modal-body" id="archive-modal-body" style="padding:0;"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>